<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
<script>
  const client = mqtt.connect("wss://test.mosquitto.org:8081");

  client.on("connect", function () {
    console.log("Conectado a MQTT");
    client.subscribe("esp32/temperatura");
    client.subscribe("esp32/humedad");
    client.subscribe("esp32/luz");
    client.subscribe("esp32/alerta-temp");
    client.subscribe("esp32/alerta-hum");
    client.subscribe("esp32/alerta-luz");
  });

  client.on("message", function (topic, message) {
    const data = message.toString();
    if (topic === "esp32/temperatura") document.getElementById("temp").textContent = data;
    else if (topic === "esp32/humedad") document.getElementById("hum").textContent = data;
    else if (topic === "esp32/luz") document.getElementById("luz").textContent = data;
    else if (topic === "esp32/alerta-temp") document.getElementById("alerta-temp").textContent = data;
    else if (topic === "esp32/alerta-hum") document.getElementById("alerta-hum").textContent = data;
    else if (topic === "esp32/alerta-luz") document.getElementById("alerta-luz").textContent = data;
  });
</script>
